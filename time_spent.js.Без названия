var TimeSpent={_saveTimer:5e3,_sendTimer:3e4,_data:{},update:function(e){!cur.module||e===!1&&cur.timeSpentInfo&&cur.timeSpentInfo.module===cur.module||(TimeSpent._init(e),TimeSpent._saveTime(e))},setTimers:function(e,t){e>0&&(TimeSpent._saveTimer=e),t>0&&(TimeSpent._sendTimer=t),window._spentTimerUpdate&&clearTimeout(window._spentTimerUpdate),window._spentTimerSend&&clearTimeout(window._spentTimerSend),TimeSpent._sendTime(),TimeSpent._saveTime()},_init:function(e){cur.timeSpentInfo||(cur.timeSpentInfo={module:cur.module,option:e||""},TimeSpent._sendTime())},_getData:function(){return ls.get("time_spent")||TimeSpent._data||{}},_saveData:function(e){ls.set("time_spent",e)===!1&&(TimeSpent._data=e)},_saveTime:function(e){if(cur.timeSpentInfo){var t=TimeSpent._getData(),n=Date.now(),i=cur.module!==cur.timeSpentInfo.module,m=!isUndefined(e)&&e!==cur.timeSpentInfo.option;t[cur.timeSpentInfo.module]||(t[cur.timeSpentInfo.module]={full:0,last:n,options:{}});var o=t[cur.timeSpentInfo.module];if(o.full+=n-o.last,o.last=n,cur.timeSpentInfo.option){o.options[cur.timeSpentInfo.option]||(o.options[cur.timeSpentInfo.option]={full:0,last:n});var p=o.options[cur.timeSpentInfo.option];p.full+=n-p.last,p.last=n}(i||m)&&(cur.timeSpentInfo={module:cur.module,option:e||""},t[cur.timeSpentInfo.module]||(t[cur.timeSpentInfo.module]={full:0,last:n,options:{}}),t[cur.timeSpentInfo.module].last=n,e&&t[cur.timeSpentInfo.module].options[e]&&(t[cur.timeSpentInfo.module].options[e].last=n)),TimeSpent._saveData(t),window._spentTimerUpdate&&clearTimeout(window._spentTimerUpdate),window._spentTimerUpdate=setTimeout(TimeSpent._saveTime,TimeSpent._saveTimer),window._spentTimerSend||(window._spentTimerSend=setTimeout(TimeSpent._sendTime,TimeSpent._sendTimer))}},_sendTime:function(){var e=TimeSpent._getData();isEmpty(e)||(statlogsValueEvent("time_spent",e),ls.remove("time_spent"),TimeSpent._data={}),window._spentTimerSend&&(clearTimeout(window._spentTimerSend),window._spentTimerSend=null)}};window.timeSpent=TimeSpent;try{stManager.done("time_spent.js")}catch(e){}